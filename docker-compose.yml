version: "3.9"

services:
  mind:
    build: .
    container_name: mind
    env_file:
      - .env
    environment:
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY}
      - MIND_EMBEDDING_MODEL=${MIND_EMBEDDING_MODEL:-qwen/qwen3-embedding-8b}
      - MIND_LLM_MODEL=${MIND_LLM_MODEL:-qwen/qwen-2.5-7b-instruct}
      - MIND_EMBEDDING_DIM=${MIND_EMBEDDING_DIM:-4096}
      - SQLITE_VEC_PATH=${SQLITE_VEC_PATH:-/usr/local/lib/vec0}
      - MIND_DATA_DIR=${MIND_DATA_DIR:-/app/data}
      - MIND_DB_PATH=${MIND_DB_PATH:-/app/data/mind.db}
      - MIND_SERVER_NAME=${MIND_SERVER_NAME:-0.0.0.0}
      - MIND_SERVER_PORT=${MIND_SERVER_PORT:-7860}
      - MIND_AI_ASSIST=${MIND_AI_ASSIST:-true}
      - MIND_AUTO_CLUSTER=${MIND_AUTO_CLUSTER:-true}
    ports:
      - "7860:7860"
    volumes:
      - mind_data:/app/data

volumes:
  mind_data:
